firstName <- strsplit(playerProfile$Name, "-")[:,1]
firstName <- strsplit(playerProfile$Name, "-")[,1]
firstName <- strsplit(playerProfile$Name, "-")
firstName <- matrix(strsplit(playerProfile$Name, "-"),nrow=180,byrow=TRUE)[,1]
firstName <- matrix(strsplit(playerProfile$Name, "-"),nrow=180,byrow=TRUE)[,1]
firstName <- matrix(strsplit(playerProfile$Name, "-"),nrow=180,byrow=TRUE)
firstName <- matrix(strsplit(playerProfile$Name, "-"),nrow=180,byrow=TRUE)
firstName <- matrix(strsplit(playerProfile$Name, "-"),nrow=180,byrow=TRUE)[1,]
firstName <- matrix(strsplit(playerProfile$Name, "-"),nrow=180,byrow=TRUE)
firstName <- matrix(strsplit(playerProfile$Name, "-"),nrow=180,byrow=TRUE)[,2]
firstName <- matrix(unlist(strsplit(playerProfile$Name, "-")),nrow=180,byrow=TRUE)[,1]
firstName <- strsplit(playerProfile$Name, "-")
lapply(firstName,attributes)
firstName[[]][1]
firstName[1]
firstName[[:]][1]
firstName[[1:180]][1]
firstName[[180]][1]
lapply(firstName, function(x) x[,1])
lapply(firstName, function(x) x[1])
sapply(firstName, function(x) x[1])
firstName <- sapply(firstName, function(x) x[1])
firstName[firstName!(firstName %in% players[,2])]
firstName[!(firstName %in% players[,2])]
firstName <- sapply(firstName, function(x) x[1])
firstName
firstName[!(firstName %in% players[,2])]
firstName[!(firstName %in% players[,2])]
View(playerProfile)
if(length(playerProfile) == length(players)){
print("Numbers match")
} else {
print("Number of players found is ", length(players)," while number of URLs is ",length(playerProfile))
}
length(playerProfile)
length(player)
length(players)
rowlength(players)
dim(players)
dim(players)[1]
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1])
}
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(c("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
print("Numbers match")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
playerProfile <- rbind(playerProfile[1:30,],c("wei-ling-hsu","98290"), playerProfile[-(1:30)])
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
playerProfile <- rbind(playerProfile[1:30,],c("wei-ling-hsu","98290"), playerProfile[-(1:30),])
players <- cbind(players,playerProfile[,2])
players <- cbind(players[,1],playerProfile[,2],players[,-1])
playerProfile <- rbind(playerProfile[1:30,],c("wei-ling-hsu","98290"), playerProfile[-(1:30),])
players <- cbind(players[,1],playerProfile[,2],players[,-1])
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
playerProfile <- rbind(playerProfile[1:30,],c("wei-ling-hsu","98290"), playerProfile[-(1:30),])
players <- cbind(players[,1],playerProfile[,2],players[,-1])
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
playerProfile <- rbind(playerProfile[1:30,],c("wei-ling-hsu","98290"), playerProfile[-(1:30),])
players <- cbind(players[,1],playerProfile[,2],players[,-1])
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
"~/AntTofDataSciProject/golf.html")
# Players scraped in table
library("XML")
colTypes <- c("numeric","character","character","numeric")
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
install.packages("DataCombine")
library(DataCombine)
playerProfile <- InsertRow(playerProfile,c("wei-ling-hsu","98290"), 31)
library(dplyr)
install.packages("dplyr")
install.packages("dplyr")
library("dplyr")
library(dplyr)
library(dplyr)
library(dplyr)
install.packages(dplyr)
install.packages("dplyr")
library(dplyr)
library(dplyr)
playerProfile <- add_row(playerProfile,c("wei-ling-hsu","98290"), .after=30)
playerProfile <- add_row(playerProfile,x=c("wei-ling-hsu","98290"), .after=30)
library(DataCombine)
playerProfile <- InsertRow(playerProfile,c("wei-ling-hsu","98290"), 31)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
"~/AntTofDataSciProject/golf.html")
# Players scraped in table
library("XML")
colTypes <- c("numeric","character","character","numeric")
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
library(DataCombine)
playerProfile <- InsertRow(playerProfile,c("wei-ling-hsu","98290"), 31)
players <- (players[,1],playerProfile[,2],players[,-1])
players <- colbind(players,playerProfile[,2])
players <- cbind(players,playerProfile[,2])
names(players[,5]) <- "ID"
names(players[,5]) <- c("ID")
players <- cbind(players,playerProfile[,2], colnames("ID"))
colnames(players[,5]) <- c("ID")
colnames(players[5]) <- c("ID")
library("tibble")
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
"~/AntTofDataSciProject/golf.html")
# Players scraped in table
library("XML")
colTypes <- c("numeric","character","character","numeric")
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
library("tibble")
playerProfile <- add_row(playerProfile,c("wei-ling-hsu","98290"), .after=30)
playerProfile <- add_row(playerProfile,Name = c("wei-ling-hsu"),ID =c("98290"), .after=30)
players <- add_column(players,playerProfile[,2], .after = 1)
players <- add_column(players,as,numeric(playerProfile[,2]), .after = 1)
players <- add_column(players,as.numeric(playerProfile[,2]), .after = 1)
colnames(players[2]) <- c("ID")
rename(players[,2],c("ID"))
names(players)
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
library("tibble")
playerProfile <- add_row(playerProfile,Name = c("wei-ling-hsu"),ID =c("98290"), .after=30)
players <- add_column(players,as.numeric(playerProfile[,2]), .after = 1)
names(players)[2] <- c("ID")
# Extracting Player Country
playerCountryImageURLPath <- getHTMLExternalFiles("golf.html", xpQuery = "//img[contains(@src,'countries')]/@src")
library(stringr)
str_match(playerCountryImageURLPath,"countries/(.*?).png")
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?).png")[,2])
playerCountries
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?)(.png|.gif)")[,2])
playerCountries
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?)(.png|.gif|.img)")[,2])
playerCountries
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?){3}")[,2])
playerCountries
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?{3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?).")[,2])
playerCountries
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?).")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?).img")[,2])
playerCountries
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?).png")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{1})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{2})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{4})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z{3}])")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z{1}])")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.3[a-z])")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.{3}[a-z])")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.[a-z]{1,3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{1,3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{1,3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z{1}])")[,2])
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
"~/AntTofDataSciProject/golf.html")
# Players scraped in table
library("XML")
colTypes <- c("numeric","character","character","numeric")
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
library("tibble")
playerProfile <- add_row(playerProfile,Name = c("wei-ling-hsu"),ID =c("98290"), .after=30)
players <- add_column(players,as.numeric(playerProfile[,2]), .after = 1)
names(players)[2] <- c("ID")
str(players)
# Extracting Player Country
playerCountryImageURLPath <- getHTMLExternalFiles("golf.html", xpQuery = "//img[contains(@src,'countries')]/@src")
library(stringr)
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{1,3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]){1,3}")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]){1,3}")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{1,3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{1,2})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{1,3})")[,2])
playerCountries <- toupper(str_extract(playerCountryImageURLPath,"countries/(.*[a-z])")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]{3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*{3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?{3})")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?)")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?).[a-z]")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*?).[a-z]+")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]).[a-z]+")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]).[a-z]")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])\.[a-z]")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z]).[a-z]+")[,2])
?grep
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])\.[a-z]+")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])\\.[a-z]+")[,2])
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])\\.")[,2])
players <- add_column(players,playerCountries, .after = "Name")
names(players)["playerCountries"] <- c("Country")
names(players)[4] <- c("Country")
str(players)
remove_column()
players <- players[,-4]
players <- players[,-c("Country")]
players <- players[,-4]
players <- select(players,-c(4))
View(players)
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
"~/AntTofDataSciProject/golf.html")
# Players scraped in table
library("XML")
colTypes <- c("numeric","character","character","numeric")
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
library("tibble")
playerProfile <- add_row(playerProfile,Name = c("wei-ling-hsu"),ID =c("98290"), .after=30)
players <- add_column(players,as.numeric(playerProfile[,2]), .after = 1)
names(players)[2] <- c("ID")
str(players)
# Extracting Player Country
playerCountryImageURLPath <- getHTMLExternalFiles("golf.html", xpQuery = "//img[contains(@src,'countries')]/@src")
library(stringr)
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])\\.")[,2])
players <- add_column(players,as.factor(playerCountries), .after = "Name")
names(players)[4] <- c("Country")
str(players)
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
"~/GitHub/ieseDataSciProject/golf.html")
# Players scraped in table
library("XML")
colTypes <- c("numeric","character","character","numeric")
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
library("tibble")
playerProfile <- add_row(playerProfile,Name = c("wei-ling-hsu"),ID =c("98290"), .after=30)
players <- add_column(players,as.numeric(playerProfile[,2]), .after = 1)
names(players)[2] <- c("ID")
str(players)
# Extracting Player Country
playerCountryImageURLPath <- getHTMLExternalFiles("golf.html", xpQuery = "//img[contains(@src,'countries')]/@src")
library(stringr)
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])\\.")[,2])
players <- add_column(players,as.factor(playerCountries), .after = "Name")
names(players)[4] <- c("Country")
str(players)
# Finding if there is a corellation between money and events played
library("ggplot2")
ggplot(data = players, mapping = aes(x=players$`Events Played`, y=players$`Official Money`)) +
geom_point() +
scale_y_log10()
cor(players$`Events Played`,players$`Official Money`)
# seems like there is a positive corellation between events played and money made
# seems like there is a positive corellation between events played and money made
setwd("~/GitHub/ieseDataSciProject")
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
"~/GitHub/ieseDataSciProject/golf.html")
# Players scraped in table
library("XML")
colTypes <- c("numeric","character","character","numeric")
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
# Add a player row manually. Row was originally ommitted due to bad link on the website
library("tibble")
playerProfile <- add_row(playerProfile,Name = c("wei-ling-hsu"),ID =c("98290"), .after=30)
players <- add_column(players,as.numeric(playerProfile[,2]), .after = 1)
names(players)[2] <- c("ID")
str(players)
# Extracting Player Country
playerCountryImageURLPath <- getHTMLExternalFiles("golf.html", xpQuery = "//img[contains(@src,'countries')]/@src")
library(stringr)
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])\\.")[,2])
if(dim(playerCountries)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of nationalities is ",dim(playerProfile)[1]))
}
if(dim(playerCountries)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of nationalities is ",dim(playerCountries)[1]))
}
if(length(playerCountries) == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of nationalities is ",length(playerCountries)))
}
players <- add_column(players,as.factor(playerCountries), .after = "Name")
names(players)[4] <- c("Country")
str(players)
# Finding if there is a corellation between money and events played
library("ggplot2")
ggplot(data = players, mapping = aes(x=players$`Events Played`, y=players$`Official Money`)) +
geom_point() +
scale_y_log10()
cor(players$`Events Played`,players$`Official Money`)
install.packages("tidyverse")
#Loading libraries
library("XML")
library("tidyverse")
library("stringr")
library("ggplot2")
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
"~/GitHub/ieseDataSciProject/golf.html")
# Players scraped in table
colTypes <- c("numeric","character","character","numeric")
players <- readHTMLTable("golf.html", colClasses = colTypes, stringsAsFactors = FALSE, as.data.frame = TRUE, which = 1)
str(players)
class(players)
# Converting official money to numeric
players$`Official Money`<- as.numeric(gsub("\\$|,","",players$`Official Money`))
str(players)
# Extracting player ID
playerProfileURLPath <- getHTMLLinks("golf.html", xpQuery = "//a[contains(@href,'players') and contains(@href,'overview')]/@href")
playerProfile <- data.frame(matrix(unlist(strsplit(playerProfileURLPath,"/")),nrow=length(playerProfileURLPath), byrow = TRUE),stringsAsFactors = FALSE) [,3:4]
names(playerProfile) <- c("Name","ID")
if(dim(playerProfile)[1] == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of URLs is ",dim(playerProfile)[1]))
}
# Add a player row manually. Row was originally ommitted due to bad link on the website
playerProfile <- add_row(playerProfile,Name = c("wei-ling-hsu"),ID =c("98290"), .after=30)
players <- add_column(players,as.numeric(playerProfile[,2]), .after = 1)
names(players)[2] <- c("ID")
str(players)
# Extracting Player Country
playerCountryImageURLPath <- getHTMLExternalFiles("golf.html", xpQuery = "//img[contains(@src,'countries')]/@src")
playerCountries <- toupper(str_match(playerCountryImageURLPath,"countries/(.*[a-z])\\.")[,2])
if(length(playerCountries) == dim(players)[1]){
print("Numbers match")
} else {
print(paste("Number of players found is ", dim(players)[1]," while number of nationalities is ",length(playerCountries)))
}
players <- add_column(players,as.factor(playerCountries), .after = "Name")
names(players)[4] <- c("Country")
str(players)
# Finding if there is a corellation between money and events played
ggplot(data = players, mapping = aes(x=players$`Events Played`, y=players$`Official Money`)) +
geom_point() +
scale_y_log10()
cor(players$`Events Played`,players$`Official Money`)
View(playerProfile)
path <- file.path("~","GitHub","ieseDataSciProject","golf.html")
download.file('http://www.lpga.com/statistics/money/official-money?year=2018', destfile=
path)
library(tidyr)
library(XML)
xmlSApply("golf.html",xmlGetAttr, "href")
golf <- xmlParse("golf.html")
golf <- xmlTreeParse("golf.html")
dir()
wd()
getwd()
golf <- xmlTreeParse(golf.html)
golf <- xmlTreeParse("golf.html")
golf <- htmlParse("golf.html")
xmlSApply(golf,xmlGetAttr, "href")
htmlSApply(golf,xmlGetAttr, "href")
golf <- htmlTreeParse("golf.html")
xmlSApply(golf,xmlGetAttr, "href")
class(golf)
dim(golf)
xmlApply(golf,xmlGetAttr, "href")
xmlApply(golf,xmlGetAttr, "href")
xmlApply(golf,xmlGetAttr, "href")
celar
clear
xmlApply(golf,xmlGetAttr, "href")
xmlApply(golf,xmlGetAttr, "href")
xmlApply(golf,xmlGetAttr, "href")
xmlApply(golf, xmlGetAttr, "href")
